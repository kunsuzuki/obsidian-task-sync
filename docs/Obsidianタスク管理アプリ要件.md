# Obsidianタスク管理アプリ要件

## 機能要件
- **マークダウン同期**: タスクをObsidian互換のマークダウンファイル（例: `- [ ] タスク名 納期:YYYY-MM-DD id:task-123 ノート:[[ノート名]]`）として保存し、差分同期（手動/自動: 起動時、フォーカス時、10秒間隔）。
- **ローカル保存**: タスクとノートをObsidianの保管庫内の指定フォルダ（例: `Tasks/`、`Notes/`）に`.md`ファイルとして保存。
- **デイリーノート同期**: タスク（全て/今日のみ）をデイリーノート（例: `Daily/YYYY-MM-DD.md`）の特定セクション（例: `### Tasks`）に書き込み。
- **直感的なGUI**: タスク管理用のモダンなインターフェース（ドラッグ＆ドロップ対応のKanbanボード、カレンダービュー、notion風テーマ）。
- **タスクノート**: タスクごとにリンク付きノート（例: `[[ノート名]]`）を作成、テンプレート対応（例: `# ノート名\n作成日: {{date}}`）、タスクIDで双方向性。
- **独自タグ管理**: Obsidianの`#tag`と分離したアプリ専用タグ（例: `tags: tag1,tag2`）。
- **ステータス管理**: 「未着手」「進行中」「完了」＋カスタムステータス。
- **日付管理**: 作成日、更新日、完了日、納期を記録し、カレンダービューで表示。
- **通知**: 同期完了/エラーをトースト通知で表示。

## 技術スタック
- **プラットフォーム**: ブラウザベース（静的エクスポート、PWA対応検討、MVPではオンライン前提）。
- **フロントエンド**: React（Next.js、Tailwind CSSでObsidian風UI）。
- **バックエンド**: なし（クライアント側でFile System Access API）。
- **ライブラリ**:
  - **File System Access API**: ローカルファイルの読み書き、フォルダ操作。
  - `react-beautiful-dnd`: Kanbanボードのドラッグ＆ドロップ。
  - `react-calendar`またはFullCalendar: カレンダービュー。
  - `marked`または`markdown-it`: マークダウンパース。
  - `idb`（IndexedDB）: 将来的なオフラインキャッシュ（MVPでは不要）。
- **開発ツール**: Windsurf（AI搭載IDE）でコード生成、デバッグ、プロジェクト管理。
- **バージョン管理**: GitHubリポジトリ（`kunsuzuki/obsidian-task-sync`）でコード管理、自動デプロイ連携。
- **デプロイ**: Cloudflare Pages（Next.jsの静的エクスポート、自動デプロイ）。
- **データ管理**: ファイルベース（`.md`）、将来はIndexedDBで大規模対応。

## 開発要件
- **MVP（最小限の製品）**:
  - タスク入力フォーム（タスク名、ステータス、納期、タグ、ノートリンク）。
  - File System Access APIで保管庫の`.md`ファイルに保存。
  - 設定画面（保管庫フォルダ、同期対象ノート、デイリーノート設定、同期間隔、ノート保存先）。
  - 差分同期（手動ボタン、自動: 起動時/フォーカス時/10秒間隔、`lastModified`で検知）。
  - デイリーノート同期（全て/今日のタスク、特定セクションに書き込み）。
  - ノート作成（テンプレート対応、タスクIDで双方向性）。
  - トースト通知（同期完了/エラー、Tailwind CSSでデザイン）。
- **パフォーマンス**: タスク数が増えた場合、IndexedDBで最適化（MVP後）。
- **同期**: 差分同期で競合を最小化、ファイルハンドルベースで制御。
- **UX**: Obsidianのシンプルさに合わせ、直感的なインターフェース、設定保存（`localStorage`）。